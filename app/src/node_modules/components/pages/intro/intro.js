var React         = require('react')
var Fluxxor       = require('fluxxor')
//mixins
var FluxMixin           = Fluxxor.FluxMixin(React)
var StoreWatchMixin     = Fluxxor.StoreWatchMixin


//helpers
var _         = require('lodash')

var Grid 				= require('react-bootstrap/lib/Grid')
var Row 				= require('react-bootstrap/lib/Row')
var Col 				= require('react-bootstrap/lib/Col')

var log       = require('debug')('src:components:intro')


module.exports = React.createClass({
  mixins: [
    Fluxxor.FluxMixin(React)
  ],

  render: function () {

    log('props, state', this.props, this.state)
    var flux = this.getFlux()    
    var SelectView
    var navItems = [
      {slug:'issues',title:'Issues'},
      {slug:'groups',title:'Population Groups'},
      {slug:'agencies',title:'Government Agencies'},
      {slug:'treatybodies',title:'Treaty Bodies'}
    ]

      

      SelectView = (
        <ul className="list-inline nav-primary-list">
            {
              _.map(navItems,function (item, i, items) {
                var width = 1/items.length * 100 + '%'
                return (
                  <li className={'nav-primary-li'}  style={{width:width}}>
                    <a
                      className='btn'
                      href='#'
                      onClick={this.handleCategoryClick(item.slug)}>
                      <span className={'icon-'+ item.slug}></span>
                      <div className='title'>{item.title}</div>
                    </a>
                  </li>
                )
              },this)
            }
          </ul>
      )
    
    return (
      <div className='intro text-center'>
        <Grid>
          <Row>
            <Col md={8} mdPush={2}>
              <h1> New Zealand's national Plan of Action for the Protection and Promotion of Human Rights 2015 - 2019</h1>
              <p>
                This interactive tool sets out the actions the Government is taking as a result of the commitments 
                it made through its second Universal Periodic Review (UPR) before the United Nations Human Rights Council in 2014
              </p>
            </Col>
          </Row>
        </Grid>
        <Grid>
          <Row>
            <div className="hint"> Explore actions and recommendations by: </div>
            {SelectView}
          </Row>
        </Grid>
      </div>
    )
  },

  handleCategoryClick: function (slug) {   
    return _.bind(function (e) {
      e.preventDefault()
      this.getFlux().actions.exploreby(slug)
    },this)
  }
})
