var React           = require('react')
var Fluxxor         = require('fluxxor')
var StoreWatchMixin = Fluxxor.StoreWatchMixin

//components
var EntityTable            = require('components/list/EntityTable')


//helpers

var _               = require('lodash')

var log       = require('debug')('src:components:pages:articles')

module.exports = React.createClass({
  mixins: [
    Fluxxor.FluxMixin(React),
    StoreWatchMixin('articles')
  ],

  getStateFromFlux: function () {
    var flux = this.getFlux()        
    return {
      articelsLoading: flux.store('articles').isLoading(),
      
    }
  },

  render: function () {
//    log('props, state', this.props, this.state)
    var flux = this.getFlux()        
    if (this.state.articlesLoading ) {
      return  (
        <Load />
      )
    } else {
      var entities = flux.store('articles').entities()
      var cols = [
                {type:'no', title: 'No',      attr:'id'},
                {type:'text', title: 'English',  attr:'title'},
                {type:'text', title: 'Te reo MƒÅori',  attr:'titlemaori'}
        ]
      return (
          <EntityTable
            collapsible = {false}
            className="articles-table"  
            linked ={false}
            cols = {cols}
            entities = {entities} />
      )      
    }
    
  }
 

})
