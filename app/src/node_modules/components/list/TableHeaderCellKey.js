//main
var React     = require('react')

//helpers
var _           = require('lodash')
var log         = require('debug')('src:components:entityListCellBar')



var TableHeaderCellKey = React.createClass({

  propTypes : {    
    cellKey: React.PropTypes.object    
  },
  
  render: function () {    
    log('props',this.props)
        
    return (
      <div className='cell-key-wrap'>
       {this.renderLink()}
       {this.renderKey()}
      </div>
    )
  },
  renderLink : function() {
    var key = this.props.cellKey
    
    if (typeof key.link !== 'undefined') {
      return (
        <a title={key.link.title} 
          onClick={key.link.onClick}
          className="cell-key-link" href="#">        
            <span className={key.link.icon} />
            <span>{key.link.title}</span>
        </a>
      )
    } else {
      return null
    }
    
  },
  renderKey : function() {
    var key = this.props.cellKey
    if (key.type === 'units') {
      return (
        <div className="cell-key">
          { _.map(key.items,function(item,i){
              return (
                <div key={i} className="cell-key-item">
                  <span className="cell-key-item-block" style={{backgroundColor:item.color}}/>
                  <span className="cell-key-item-title" >{item.title}</span>
                </div>
              )
            })    
          }
        </div>
      )
    }
    else if (key.type === 'icons') {
      return (
        <div className="cell-key">
          { _.map(key.items,function(item,i){
              return (
                <div key={i} className="cell-key-item">
                  <span className={"cell-key-item-icon " + item.class} />
                  <span className="cell-key-item-title" >{item.title}</span>
                </div>
              )
            })    
          }
        </div>
      )
    }
    else if (key.type === 'no') {
      return (
        <div className="cell-key">
          { _.map(key.items,function(item,i){
              return (
                <div  key={i} className="cell-key-item">
                  <span className={"strong cell-key-item-no " + item.class} style={{color:item.color}}>{item.no}</span>
                  <span className="cell-key-item-title" >{item.title}</span>
                </div>
              )
            })    
          }
        </div>
      )
    }
    else {
      return null
    }
  }
})


module.exports = TableHeaderCellKey;