//main
var React     = require('react')

//helpers
var _           = require('lodash')
var log         = require('debug')('src:components:entityListCellBar')



var TableLinkCellBar = React.createClass({

  propTypes : {
    entity: React.PropTypes.object,    
    col: React.PropTypes.array    
  },
  
  render: function () {    
    log('props',this.props)
    
    var entity = this.props.entity
    var col = this.props.col
    
    return (
      <div className='cell-bar-wrap cell-ratio-bar-wrap'>
        <span className="bar-label" 
          style={{color:col.ratio.color}}>
                  {entity[col.ratio.attr]}
        </span>
        <span className="bar">
          <div className="bar-value bar-value-total" 
            style={{
                width:(entity[col.value.attr]/col.maxValue*100).toString() + '%',
              backgroundColor:col.value.color
              }}/>          
          <div className="bar-value  bar-value-ratio" 
            style={{
                width:(entity[col.ratio.attr]/col.maxValue*100).toString() + '%',
                backgroundColor:col.ratio.color
              }}/>
          <div className="bar-label bar-label-value-total" 
            style={{
                left:(entity[col.value.attr]/col.maxValue*100).toString() + '%',
                color:col.value.color
              }}>
            {parseInt(entity[col.value.attr]) - parseInt(entity[col.ratio.attr])}
          </div>
        </span>
        <span className="bar-label bar-label-spacer"/> 
      </div>
    )
  }
})


module.exports = TableLinkCellBar;