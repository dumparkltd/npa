var React       = require('react')

var CategoryList = require('components/list/CategoryList')

//helpers
var _           = require('lodash')
var log         = require('debug')('src:components:CategoryListFactory')



var CategoryListFactory = React.createClass({
  propTypes : {
    entity: React.PropTypes.object,
    store : React.PropTypes.object,
    taxonomy: React.PropTypes.string
  },
  
  render: function () {    
    log('props',this.props)
    
    var store = this.props.store
    var entity = this.props.entity
    var taxonomy = this.props.taxonomy
    
    // get categories for entity 
    var categories =  store.filter(function(category){
      return entity[taxonomy].split(',').indexOf(category.id) > -1
    })
    
    if (categories.length === 0){
      return null       
    } else {        
      return (
        <div className='category-list-aside'>
          <h6>{store.getTitle(categories.length)}</h6>
          <CategoryList
            entities = {categories} 
            entityType = {store.getEntityType()}
          />
        </div>
      )
    }
      
  }   
})

module.exports = CategoryListFactory;
