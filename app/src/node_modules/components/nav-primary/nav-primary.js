var React         = require('react')

//helpers
var _         = require('lodash')

var log       = require('debug')('src:components:nav-primary')

var Grid 				= require('react-bootstrap/lib/Grid')
var Row 				= require('react-bootstrap/lib/Row')
var Col 				= require('react-bootstrap/lib/Col')

module.exports = React.createClass({

  render: function () {
    log('props', this.props)

    return (
      <div className='nav-primary'>
        <Grid className=''>
          <Row className='nav-primary-row'>
            <Col sm={2} className='nav-primary-label serif hidden-xs'>
              <div>Explore</div>
              <div>actions and recommendations by</div>
            </Col>
            <Col sm={10} className="nav-primary-list-wrapper">
              <ul className="list-inline nav-primary-list">
                {
                  _.map(this.props.items,function (item, i, items) {
                    var width = 1/items.length * 100 + '%'
                    return (
                      <li key={i} className={item.active ? 'nav-primary-li active' : 'nav-primary-li'}  style={{width:width}}>
                        <a
                            className='btn'
                            href='#'
                            onClick={this.handleItemClick(item.slug)}>
                          <span className={'icon-'+ item.slug}></span>
                          <div className='title'>{item.title}</div>
                        </a>
                        <div className="arrow" style={{left: "50%"}}></div>
                      </li>
                    )
                  },this)
                }               
              </ul>
            </Col>            
          </Row>
        </Grid>
      </div>


    )
  },

  handleItemClick: function (slug) {
    return _.bind(function (e) {
      e.preventDefault()
      this.props.flux.actions[this.props.type](slug)
    },this)
  }
})
