// react
var React        = require('react')
var Fluxxor      = require('fluxxor')
var Router       = require('react-router')

//components
var Header 	     = require('components/Header')
var Footer       = require('components/Footer')

//helpers
var _            = require('lodash')
var log          = require('debug')('src:components:main:index')

module.exports = React.createClass({

  mixins: [
    Fluxxor.FluxMixin(React)
  ],

  contextTypes: {
    router: React.PropTypes.func
  },

  render: function () {
    log('props',this.props)

    var flux = this.getFlux()
    var RouteHandler = Router.RouteHandler
    
    return (
      <div className={'hrc-app route-' + flux.stores.routes.getCurrentRoute()}>
        <Header
          currentHREF = {window.location.href}
          route = {flux.stores.routes.getCurrentRoute()}
          param = {flux.stores.routes.getCurrentParams().id}
          title = "New Zealand's National Plan of Action"
          introtitle = "New Zealand's National Plan of Action 2015 – 2019"
          subtitle = "Mahere Rautāki a Motu"
        />
        <div className="page-wrapper">
          <RouteHandler />
        </div>
        <Footer
          infoText = "Every care has been taken to ensure the accuracy of this data. Please send any feedback to "
          infoEmail = "infoline@hrc.co.nz"
          parentSiteText = "Visit our website to learn more about Human Rights in New Zealand"
          parentSiteAnchorText = "www.hrc.co.nz"
          parentSiteURL = "http://hrc.co.nz"
        />
      </div>
    )
  },
})
