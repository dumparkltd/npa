//react
var React           = require('react')
var Fluxxor         = require('fluxxor')
var StoreWatchMixin = Fluxxor.StoreWatchMixin

//components
var Load            = require('components/load')

//helpers
var _   = require('lodash')
var log = require('debug')('src:components:faq')


module.exports = React.createClass({
mixins: [
    Fluxxor.FluxMixin(React),
    StoreWatchMixin('faq')
  ],

  getStateFromFlux: function () {
    var flux = this.getFlux()

    return {
      loading: flux.store('faq').isLoading()
    }
  },

  render: function () {
    log('props, state', this.props, this.state)

    var rows = this.getFlux().store('faq').entities()
    
    if (this.state.loading ) {
      return  (<Load alt="Loading content &hellip;"/>)
    } else {
      return (
        <div className='faq-list'>
          {
            _.map(rows,function(row,key){
              return (
                <div key={key} className='faq-row'>
                  <h3>{row.id + '. ' + row.question}</h3>
                  <div>{row.answer}</div>
                </div>
              )                
            }, this)
          }        
        </div>
      )
    }
  }
  
})
