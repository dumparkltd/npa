var _ = require('lodash')

//removes whiteSpace from all values in a collection of objects
module.exports = function (collection) {
  //for all rows
  collection = _.map(collection, function(item){
    // for all columns
    var updated = {}    
    _.each(item, function(value,key){
      var referenceKeys = ['issues', 'groups', 'agencies', 'recommendations', 'treatybodies', 'articles']
      updated[key] = typeof value === 'string' ? _.trim(referenceKeys.indexOf(key) > -1 ? value.replace(', ',',').split(',') : value) : value
    })
    return updated
  })  

  return collection
}